{% macro box(page='items') -%}
{%- endmacro %}


{% macro box(page='items') -%}
    
    <div class="card {% if item.status == "current" %}yellow lighten-4{% else %}{%endif%}"> 
        <small>{{ item.status }}</small></br>
        <strong>{{item.title}}</strong>
        <p>{{item.author}}</p>
        <p>Favorites: {{item.favorites | length}}<p>
        <div class="row">
        {% if 'username' in session %}
                
            {% if page == 'items' %}
                {{ favorite(page='items') }}
                {% if item.owner == session['username'] %}
                    {{ itemspage(page='items') }}
                {% endif %}
            {% endif %}
    
            {% if page == 'reading' %}
                {{ favorite(page='reading') }}
                {{ readingpage(page='reading') }}
            {% endif %}
    
            {% if page == 'reviews' %}
                {{ reviewspage(page='reviews') }}        
            {% endif %}

            

            {% if item.owner == session['username'] or item.suggester == session['username']%}
                <a class="waves-effect waves-light btn right modal-trigger red lighten-1" href="#modal1">Delete</a><br>

                <div id="modal1" class="modal">
                <div class="modal-content">
                <h4>Delete Profile</h4>
                <p>Are you sure you want to delete this item?
            {% if item.suggester == session['username']%}
            You can delete this because you suggested it {% endif %}
          </p>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-close waves-effect waves-green btn-flat">Cancel</a>
      <a href="{{ url_for('delete', list_profile=list_profile,  page=page, item_id=item._id)}}" class="modal-close waves-effect waves-green btn-flat red white-text">Delete</a>
    </div>
  </div>
            {% endif %}
</div>



        {% endif %}
        {% if item.complete %}
            ---------------------------------</br>
            {{item.stars}}</br>
            {{ item.review }}</br>
        {% endif %}

    </div>

{%- endmacro %}


{% macro favorite(page) %}
        {% if session['username'] not in item.favorites %}
            <a href="{{ url_for('favorite', list_profile=list_profile, page=page,   item_id=item._id )}}" >Favorite</a></br>
        {% else %}
            <a href="{{ url_for('unfavorite', list_profile=list_profile, page=page, item_id=item._id) }}">Unfavorite</a></br>
        {% endif %}
        
{% endmacro %}


{% macro itemspage(page) %}
        {% if item.status == 'reading' %}
            <a class="cool-green waves-effect waves-light btn right" href="{{ url_for('set_status', list_profile=list_profile, page=page, status='suggested', item_id=item._id)}}" >On Reading</a></br>
        {% else %}
            <a class="light-blue waves-effect waves-light btn right" href="{{ url_for('set_status', list_profile=list_profile, page=page, status='reading', item_id=item._id)}}" >Add to Reading</a></br>
        {% endif %}
        

{% endmacro %}


{% macro readingpage(page) %}
        {% if item.status == 'current' %}
            <a class="cool-green waves-effect waves-light btn right" href="{{ url_for('set_status', list_profile=list_profile, page=page, status='reading', item_id=item._id)}}" >Remove from Current</a></br>
            <a class="light-blue cool-green waves-effect waves-light btn right" href="{{ url_for('complete', list_profile=list_profile, item_id=item._id )}}" >Complete</a></br>
        {% else %}
            <a class="cool-green waves-effect waves-light btn right" href="{{ url_for('set_status', list_profile=list_profile, page=page, status='suggested', item_id=item._id)}}" >Remove from Reading</a></br>
            <a class="light-blue waves-effect waves-light btn right" href="{{ url_for('set_status', list_profile=list_profile, page=page, status='current', item_id=item._id)}}" >Add to Current</a></br>
        {% endif %}

{% endmacro %}

{% macro reviewspage(page) %}
        <a class="waves-effect waves-light btn right" href="{{ url_for('set_status', list_profile=list_profile, page=page, status='suggested', item_id=item._id)}}" >Suggest Again</a></br>
{% endmacro %}
